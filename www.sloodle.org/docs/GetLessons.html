
<!DOCTYPE html>
<html  dir="ltr" lang="en" xml:lang="en">

<!-- Mirrored from www.sloodle.org/docs/GetLessons by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 10 Aug 2014 23:36:02 GMT -->
<head>
    <title>GetLessons - SLIS Second Life Wiki</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
    .sloodle-custom ul,ol{padding:15px !important}
    </style>
<meta name="keywords" content="moodle, SLOODLE: Administration: Notifications" />
<script id="firstthemesheet" type="text/css">/** Required in order to fix style inclusion problems in IE with YUI **/</script><link rel="stylesheet" type="text/css" href="../css/all.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body  id="page-admin-index" class="format-site admin path-admin safari dir-ltr lang-en yui-skin-sam yui3-skin-sam sloodle-moodle pagelayout-admin course-1 context-1 has-region-side-pre used-region-side-pre">

<div class="skiplinks"><a class="skip" href="#maincontent">Skip to main content</a></div>
<script type="text/javascript">
//<![CDATA[
document.body.className += ' jsenabled';
//]]>
</script>

<nav role="navigation" class="navbar navbar-default">
    <div class="container">
    <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#moodle-navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="https://www.sloodle.org/">SLOODLE</a>
        <a class="navbar-brand" href="https://www.sloodle.org/download/">Download</a>
        <a class="navbar-brand" href="https://www.sloodle.org/research/">Research</a>
        <a class="navbar-brand" href="https://www.sloodle.org/moodle/mod/forum/index.php?id=3">Forums</a>
        <a class="navbar-brand" href="https://www.sloodle.org/docs">Documentation</a>
    </div>
    </div>
</nav>

<div id="page" class="container">

    <div id="page-content" class="sloodle-custom">


	<table id="content_table"><tr><td class="main">

	<div class="post" id="" style="width:100%">

<table border="0" cellpadding="0" cellspacing="0" style="text-align: top; width: 95%;">

<tr>
<td> <a href="SLOODLE_LSL_API.html" title="SLOODLE LSL API">Back to Sloodle API</a>
</td></tr></table>
<p><br />
</p>
<table border="2" cellpadding="0" cellspacing="0" style="text-align: top; width: 95%; color:#5a3696; border-color:black;">

<tr>
<td>
<table border="0" style="width: 100%; background:#f4f8fb; color:#5a3696; font-weight:bold; font-size:180%;">

<tr>
<td>Function: getLessons
</td></tr></table>
</td></tr>
<tr>
<td>
<table border="0">

<tr>
<td style="width: 10%; font-weight:bold;"> Description:
</td>
<td style="width: 90%;"> Returns a list of lessons in the course specified
</td></tr></table>
</td></tr>
<tr>
<td>
<table border="0">

<tr>
<td style="width: 10%; font-weight:bold;">  <font color="red">llMessageLinked</font>(<font color="green">LINK_SET</font>, PLUGIN_CHANNEL, "<font color="green">plugin:lessons,function:getLessons\nSLOODLEID:null\nindex:0|lessonsPerPage:9</font>", <font color="red">NULL_KEY</font>);
</td></tr></table>
</td></tr>
<tr>
<td>
<table border="0">

<tr>
<td style="width: 10%; font-weight:bold;" colspan="2"> Parameters:
</td></tr>
<tr>
<td style="width: 10%; color:green;"> <b>SLOODLE_ID:null</b>
</td>
<td style="width: 90%;">  this is left as null because we aren't accessing a specific activity
</td></tr>
<tr>
<td style="width: 10%; color:green;"> <b>INDEX</b>:
</td>
<td style="width: 90%;">  The index of the tool you'd like to start from
</td></tr>
<tr>
<td style="width: 10%; color:green;"> <b>ITEMS_PER_PAGE</b>:
</td>
<td style="width: 90%;">  The number of items you'd like to appear in the output
</td></tr></table>
<p><br />
</p>
</td></tr>
<tr>
<td>
<table border="0">

<tr>
<td style="width: 10%; font-weight:bold;"> Output:
</td>
<td style="width: 90%;"> <a href="https://www.sloodle.org/articles/g/e/t/File:Getlessons.jpg.html" class="image"><img alt="Getlessons.jpg" src="wiki/images/f/2F/f/f/fd/Getlessons.jpg" width="779" height="181" /></a>
</td></tr></table>
<p><br />
</p>
</td></tr>
<tr>
<td>
<table border="0">

<tr>
<td style="width: 10%; font-weight:bold;"> Example Script:
</td>
<td style="width: 90%;">
<pre> /*********************************************
*  Copyright (c) 2009 Paul Preibisch
*  Released under the GNU GPL 3.0
*  This script can be used in your scripts, but you must include this copyright header as per the GPL Licence
*  For more information about GPL 3.0 - see: <a rel="nofollow" class="external free" href="http://www.gnu.org/copyleft/gpl.html">http://www.gnu.org/copyleft/gpl.html</a>
* 
*
*  This script is part of the SLOODLE Project see <a rel="nofollow" class="external free" href="http://sloodle.org/">http://sloodle.org</a>
*
*  Copyright:
*  Paul G. Preibisch (Fire Centaur in SL)
*  fire@b3dMultiTech.com  
*
* API DEMO OBJECT.lsl 
* 
* PURPOSE
*  This script is part of the SLOODLE HQ.
*  
/**********************************************************************************************/
key owner;
// *************************************************** HOVER TEXT VARIABLES
integer DISPLAY_DATA                                                        =-774477; //every time the display is updated, data goes  on this channel
integer PLUGIN_RESPONSE_CHANNEL                                =998822; //sloodle_api.lsl responses
integer PLUGIN_CHANNEL                                                    =998821;//sloodle_api requests
integer SLOODLE_CHANNEL_TRANSLATION_REQUEST     = -1928374651;//translation channel
integer SLOODLE_CHANNEL_TRANSLATION_RESPONSE     = -1928374652;//translation channel
integer SLOODLE_CHANNEL_OBJECT_DIALOG                     = -3857343;//configuration channel

/***********************************************
*  getFieldData-- returns data from a table based on the column name
***********************************************/
string getFieldData(list tableRowData, string colName){
   return llList2String(tableRowData,llListFindList(tableRowData, [colName])+1);
} 
/***********************************************
*  s()  used so that sending of linked messages is more readable by humans.  Ie: instead of sending a linked message as
*  GETDATA|50091bcd-d86d-3749-c8a2-055842b33484 
*  Context is added instead: COMMAND:GETDATA|PLAYERUUID:50091bcd-d86d-3749-c8a2-055842b33484
*  All this function does is strip off the text before the ":" char and return a string
***********************************************/
string s (string ss){
    return llList2String(llParseString2List(ss, [":"], []),1);
}
/***********************************************
*  k()  used so that sending of linked messages is more readable by humans.  Ie: instead of sending a linked message as
*  GETDATA|50091bcd-d86d-3749-c8a2-055842b33484 
*  Context is added instead: COMMAND:GETDATA|PLAYERUUID:50091bcd-d86d-3749-c8a2-055842b33484
*  All this function does is strip off the text before the ":" char and return a key
***********************************************/
key k (string kk){
   return llList2Key(llParseString2List(kk, [":"], []),1);
}
/***********************************************
*  counter()  used so that sending of linked messages is more readable by humans.  Ie: instead of sending a linked message as
*  GETDATA|50091bcd-d86d-3749-c8a2-055842b33484 
*  Context is added instead: COMMAND:GETDATA|PLAYERUUID:50091bcd-d86d-3749-c8a2-055842b33484
*  All this function does is strip off the text before the ":" char and return an integer
***********************************************/
integer i (string ii){
   return llList2Integer(llParseString2List(ii, [":"], []),1);
}


/* &amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;
*
*  default state
*  In this state we wait until the rest of the scripts in this object init
*
* &amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp;&amp; */
default{
    
    state_entry() {
      
        //set owner
        owner = llGetOwner();
    }
   link_message(integer sender_num, integer channel, string str, key id) {
       list dataLines=llParseString2List(str, ["\n"],[]);
       list cmdLine = llParseString2List(str, ["|"],[]);
       string cmd=s(llList2String(cmdLine,0));
       if (channel==PLUGIN_RESPONSE_CHANNEL){
           if (cmd=="API READY") state go;
       }//endif channel=PLUGIN_RESPONSE_CHANNEL
   }//end linked_message event
   /***********************************************
   *  changed event
   *  |--&gt;Every time the inventory changes, reset the script
   *        
   ***********************************************/
   changed(integer change) {
        if (change ==CHANGED_INVENTORY){         
            llResetScript();
        }//endif
    }//end changed state
}//end default state


   
state go{
   touch_start(integer num_detected) {
       /*********************************************************************************
       * API CALL: getLessons:     Return all lessons in the course         
       **********************************************************************************/
        llMessageLinked(LINK_SET, PLUGIN_CHANNEL, "plugin:lessons,function:getLessons\nSLOODLEID:null\nindex:0|lessonsPerPage:9", NULL_KEY);
   }
    link_message(integer sender_num, integer channel, string str, key id) {
        
            if (channel==PLUGIN_RESPONSE_CHANNEL){
               list dataLines = llParseStringKeepNulls(str,["\n"],[]);           
               //get status code
               list statusLine =llParseString2List(llList2String(dataLines,0),["|"],[]);
               integer status =llList2Integer(statusLine,0);
               string descripter = llList2String(statusLine,1);
               string response = s(llList2String(dataLines,1));
               integer index = i(llList2String(dataLines,2)); 
               integer totalGrps= i(llList2String(dataLines,3));
               integer counter=0;
               if (response=="lessons|getLessons"){
                    //check status of returned response
                   if (status==1){
                       //get all of the lesson activities returned                        
                       list lessons = llList2List(dataLines, 5,llGetListLength(dataLines)-1);                         
                       integer len = llGetListLength(lessons);

                       list colNames =llParseString2List(llList2String(dataLines,4), ["|"], []);
                       integer colLen = llGetListLength(colNames);
                       list data;
                       for (counter=0;counter&lt;len;counter++){
                                list colData=llParseString2List(llList2String(lessons,counter), ["|"], []); //parse the message into a list
                                integer j;
                                //add all data from this line into a 2 dimensional list called tableRowData:
                                //["nameOfColumn","value"]
                                list tableRowData;      
                               for (j=0;j&lt;colLen;j++){
                                   tableRowData +=[llList2String(colNames,j),llList2String(colData,j)];
                                   llOwnerSay(llList2String(colNames,j)+": "+llList2String(colData,j));
                               }//end for
                       }//for                 
                   }//status==1
               }//endif response=="getLessons"
            }//end if channel==PLUGIN_RESPONSE_CHANNEL
      }//end link_message
       
   /***********************************************
   *  changed event
   *  |--&gt;Every time the inventory changes, reset the script
   *        
   ***********************************************/
   changed(integer change) {
        if (change ==CHANGED_INVENTORY){         
            llResetScript();
        }//endif
    }//end changed state
    
}//end state
   
</pre>
<p><br />
</p>
</td></tr></table>
<p><br />
</p>
</td></tr></table>

<!-- 
NewPP limit report
Preprocessor node count: 5/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->
</div>	<td style="vertical-align:top; padding:10px;">
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;	</td>

    </td></tr></table>

<br />
<br />
<div id="footer_info" style="font-size:80%; text-align:center">
Second Life® is a trademark of Linden Research, Inc. SLOODLE is not affiliated with or sponsored by Linden Research.<br/>
<br />
<br />
</div>

</div> <!-- End of the "page" div started in header.php... I think... PRB -->


		
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-7139194-1");
pageTracker._trackPageview();
} catch(err) {}</script>

</body>

<!-- Mirrored from www.sloodle.org/docs/GetLessons by HTTrack Website Copier/3.x [XR&CO'2008], Sun, 10 Aug 2014 23:36:02 GMT -->
</html>


